package HotelBooking.constraints;

/*Generated by MPS */

import jetbrains.mps.smodel.runtime.base.BaseConstraintsDescriptor;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import jetbrains.mps.smodel.runtime.ConstraintFunction;
import jetbrains.mps.smodel.runtime.ConstraintContext_CanBeChild;
import org.jetbrains.annotations.NotNull;
import org.jetbrains.annotations.Nullable;
import jetbrains.mps.smodel.runtime.CheckingNodeContext;
import java.util.Map;
import org.jetbrains.mps.openapi.language.SProperty;
import jetbrains.mps.smodel.runtime.PropertyConstraintsDescriptor;
import java.util.HashMap;
import jetbrains.mps.smodel.runtime.base.BasePropertyConstraintsDescriptor;
import jetbrains.mps.smodel.adapter.ids.MetaIdFactory;
import org.jetbrains.mps.openapi.model.SNode;
import HotelBooking.behavior.Hotel__BehaviorDescriptor;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SPropertyOperations;
import org.jetbrains.mps.openapi.language.SAbstractConcept;
import org.jetbrains.mps.openapi.language.SContainmentLink;
import HotelBooking.behavior.BookingManager__BehaviorDescriptor;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SLinkOperations;
import HotelBooking.behavior.Booking__BehaviorDescriptor;
import jetbrains.mps.smodel.SNodePointer;

public class Booking_Constraints extends BaseConstraintsDescriptor {
  public Booking_Constraints() {
    super(MetaAdapterFactory.getConcept(0x7f67387345c45fbL, 0xbd3e45c50d906ea1L, 0x47b154f6f964356bL, "HotelBooking.structure.Booking"));
  }

  @Override
  protected ConstraintFunction<ConstraintContext_CanBeChild, Boolean> calculateCanBeChildConstraint() {
    return new ConstraintFunction<ConstraintContext_CanBeChild, Boolean>() {
      @NotNull
      public Boolean invoke(@NotNull ConstraintContext_CanBeChild context, @Nullable CheckingNodeContext checkingNodeContext) {
        boolean result = staticCanBeAChild(context.getNode(), context.getParentNode(), context.getConcept(), context.getLink());

        if (!(result) && checkingNodeContext != null) {
          checkingNodeContext.setBreakingNode(canBeChildBreakingPoint);
        }

        return result;
      }
    };
  }
  @Override
  protected Map<SProperty, PropertyConstraintsDescriptor> getSpecifiedProperties() {
    Map<SProperty, PropertyConstraintsDescriptor> properties = new HashMap<SProperty, PropertyConstraintsDescriptor>();
    properties.put(MetaAdapterFactory.getProperty(0x7f67387345c45fbL, 0xbd3e45c50d906ea1L, 0x47b154f6f964356bL, 0x4bf25a0a3dc08386L, "roomNumber"), new BasePropertyConstraintsDescriptor(MetaIdFactory.propId(0x7f67387345c45fbL, 0xbd3e45c50d906ea1L, 0x47b154f6f964356bL, 0x4bf25a0a3dc08386L), this) {
      @Override
      public boolean hasOwnValidator() {
        return true;
      }
      @Override
      public boolean validateValue(SNode node, String propertyValue) {
        String propertyName = "roomNumber";
        if ((boolean) Hotel__BehaviorDescriptor.hasRoom_id4JMmwCXKsMQ.invoke(SNodeOperations.cast(SNodeOperations.getParent(SNodeOperations.getParent(node)), MetaAdapterFactory.getConcept(0x7f67387345c45fbL, 0xbd3e45c50d906ea1L, 0x2d11723256bb12aeL, "HotelBooking.structure.Hotel")), ((int) (SPropertyOperations.getInteger(propertyValue))))) {
          return true;
        }
        return false;
      }
    });
    properties.put(MetaAdapterFactory.getProperty(0x7f67387345c45fbL, 0xbd3e45c50d906ea1L, 0x47b154f6f964356bL, 0x47b154f6f9643579L, "GuestCount"), new BasePropertyConstraintsDescriptor(MetaIdFactory.propId(0x7f67387345c45fbL, 0xbd3e45c50d906ea1L, 0x47b154f6f964356bL, 0x47b154f6f9643579L), this) {
      @Override
      public boolean hasOwnValidator() {
        return true;
      }
      @Override
      public boolean validateValue(SNode node, String propertyValue) {
        String propertyName = "GuestCount";
        if ((boolean) Hotel__BehaviorDescriptor.hasCapacity_id4JMmwCXPcrP.invoke(SNodeOperations.cast(SNodeOperations.getParent(SNodeOperations.getParent(node)), MetaAdapterFactory.getConcept(0x7f67387345c45fbL, 0xbd3e45c50d906ea1L, 0x2d11723256bb12aeL, "HotelBooking.structure.Hotel")), node)) {
          return true;
        }
        return false;
      }
    });
    return properties;
  }
  private static boolean staticCanBeAChild(SNode node, SNode parentNode, SAbstractConcept childConcept, SContainmentLink link) {
    if ((boolean) BookingManager__BehaviorDescriptor.checkValidRoomAndDate_id4JMmwCXSPo6.invoke(SNodeOperations.cast(parentNode, MetaAdapterFactory.getConcept(0x7f67387345c45fbL, 0xbd3e45c50d906ea1L, 0x47b154f6f9643586L, "HotelBooking.structure.BookingManager")), SLinkOperations.getTarget(SNodeOperations.cast(node, MetaAdapterFactory.getConcept(0x7f67387345c45fbL, 0xbd3e45c50d906ea1L, 0x47b154f6f964356bL, "HotelBooking.structure.Booking")), MetaAdapterFactory.getContainmentLink(0x7f67387345c45fbL, 0xbd3e45c50d906ea1L, 0x47b154f6f964356bL, 0x4bf25a0a3dcc0bf3L, "CheckIn")), ((int) SPropertyOperations.getInteger(SNodeOperations.cast(node, MetaAdapterFactory.getConcept(0x7f67387345c45fbL, 0xbd3e45c50d906ea1L, 0x47b154f6f964356bL, "HotelBooking.structure.Booking")), MetaAdapterFactory.getProperty(0x7f67387345c45fbL, 0xbd3e45c50d906ea1L, 0x47b154f6f964356bL, 0x4bf25a0a3dc08386L, "roomNumber"))), SPropertyOperations.getString(SNodeOperations.cast(node, MetaAdapterFactory.getConcept(0x7f67387345c45fbL, 0xbd3e45c50d906ea1L, 0x47b154f6f964356bL, "HotelBooking.structure.Booking")), MetaAdapterFactory.getProperty(0x7f67387345c45fbL, 0xbd3e45c50d906ea1L, 0x47b154f6f964356bL, 0x47b154f6f9643580L, "CustomerName"))) && (boolean) BookingManager__BehaviorDescriptor.checkValidRoomAndDate_id4JMmwCXSPo6.invoke(SNodeOperations.cast(parentNode, MetaAdapterFactory.getConcept(0x7f67387345c45fbL, 0xbd3e45c50d906ea1L, 0x47b154f6f9643586L, "HotelBooking.structure.BookingManager")), SLinkOperations.getTarget(SNodeOperations.cast(node, MetaAdapterFactory.getConcept(0x7f67387345c45fbL, 0xbd3e45c50d906ea1L, 0x47b154f6f964356bL, "HotelBooking.structure.Booking")), MetaAdapterFactory.getContainmentLink(0x7f67387345c45fbL, 0xbd3e45c50d906ea1L, 0x47b154f6f964356bL, 0x4bf25a0a3dcca052L, "CheckOut")), ((int) SPropertyOperations.getInteger(SNodeOperations.cast(node, MetaAdapterFactory.getConcept(0x7f67387345c45fbL, 0xbd3e45c50d906ea1L, 0x47b154f6f964356bL, "HotelBooking.structure.Booking")), MetaAdapterFactory.getProperty(0x7f67387345c45fbL, 0xbd3e45c50d906ea1L, 0x47b154f6f964356bL, 0x4bf25a0a3dc08386L, "roomNumber"))), SPropertyOperations.getString(SNodeOperations.cast(node, MetaAdapterFactory.getConcept(0x7f67387345c45fbL, 0xbd3e45c50d906ea1L, 0x47b154f6f964356bL, "HotelBooking.structure.Booking")), MetaAdapterFactory.getProperty(0x7f67387345c45fbL, 0xbd3e45c50d906ea1L, 0x47b154f6f964356bL, 0x47b154f6f9643580L, "CustomerName")))) {
      if ((boolean) Booking__BehaviorDescriptor.validCheckOut_idJj8unqZe1f.invoke(node, node)) {
        return true;
      }
    }
    return false;
  }
  private static SNodePointer canBeChildBreakingPoint = new SNodePointer("r:c86ea960-bac5-4a16-bde1-2085176b3d2b(HotelBooking.constraints)", "5472535497243509181");
}
